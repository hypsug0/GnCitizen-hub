<div
  [class]="options?.htmlClass || ''"
  [class.has-feedback]="
    options?.feedback &&
    options?.isInputWidget &&
    (formControl?.dirty || options?.feedbackOnRender)
  "
  [class.has-error]="
    options?.enableErrorState &&
    formControl?.errors &&
    (formControl?.dirty || options?.feedbackOnRender)
  "
  [class.has-success]="
    options?.enableSuccessState &&
    !formControl?.errors &&
    (formControl?.dirty || options?.feedbackOnRender)
  "
>
  <button
    *ngIf="showRemoveButton"
    class="close pull-right"
    type="button"
    (click)="removeItem()"
  >
    <span aria-hidden="true">&times;</span>
    <span class="sr-only">Close</span>
  </button>
  <label
    *ngIf="options?.title && layoutNode?.type !== 'tab'"
    [attr.for]="'control' + layoutNode?._id"
    [class]="options?.labelHtmlClass || ''"
    [class.sr-only]="options?.notitle"
    [innerHTML]="options?.title"
  ></label>
  <p *ngIf="layoutNode?.type === 'submit' && jsf?.formOptions?.fieldsRequired">
    <strong class="text-danger">*</strong> = required fields
  </p>
  &nbsp;<i
    class="fa fa-question-circle"
    *ngIf="options?.helpBlock"
    placement="right"
    [ngbTooltip]="options?.helpBlock"
  ></i>
  <div
    [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight"
  >
    <span
      *ngIf="options?.fieldAddonLeft"
      class="input-group-addon"
      [innerHTML]="options?.fieldAddonLeft"
    ></span>
    <select-widget-widget
      [layoutNode]="widgetLayoutNode"
      [dataIndex]="dataIndex"
      [layoutIndex]="layoutIndex"
    ></select-widget-widget>
    <span
      *ngIf="options?.fieldAddonRight"
      class="input-group-addon"
      [innerHTML]="options?.fieldAddonRight"
    ></span>
  </div>
  <span
    *ngIf="
      options?.feedback &&
      options?.isInputWidget &&
      !options?.fieldAddonRight &&
      !layoutNode.arrayItem &&
      (formControl?.dirty || options?.feedbackOnRender)
    "
    [class.glyphicon-ok]="options?.enableSuccessState && !formControl?.errors"
    [class.glyphicon-remove]="options?.enableErrorState && formControl?.errors"
    aria-hidden="true"
    class="form-control-feedback glyphicon"
  ></span>
</div>
<div *ngIf="debug && debugOutput">
  debug:
  <pre>{{ debugOutput }}</pre>
</div>
